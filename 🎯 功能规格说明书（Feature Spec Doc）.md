# 🎯 功能规格说明书（Feature Spec Doc）  
产品名称：JsonInsight - AI JSON 字段语义解析工具（MVP）

---

## 📄 页面概览

该工具为单页应用（SPA），分为以下 5 大功能模块：

1. JSON 输入与解析区
2. AI 字段解释区
3. JSON 结构总结区
4. TypeScript 类型定义区
5. 接口中文文档区

所有模块应采用响应式设计，支持 PC 与移动端浏览体验。

---

## 🧱 模块级规格说明

### 1. JSON 输入与解析区

| 字段             | 类型         | 说明                                             |
| ---------------- | ------------ | ------------------------------------------------ |
| JSON 输入框      | `<textarea>` | 用户粘贴 JSON 内容，支持自动换行，最大高度自适应 |
| 格式化按钮       | `<button>`   | 点击后格式化 JSON 结构为树形展示                 |
| 解析按钮         | `<button>`   | 触发 AI 接口，获取字段解释、类型定义和文档       |
| 错误提示         | `<div>`      | JSON 不合法时提示错误信息                        |
| 示例按钮（可选） | `<button>`   | 自动填入预设的 JSON 示例数据                     |
| 清空按钮（可选） | `<button>`   | 一键清空输入内容                                 |

#### ✅ 功能交互：
- 支持粘贴 JSON 或从文件中读取（MVP 可选）
- 自动格式化缩进，展示可折叠树状视图
- JSON 结构为只读高亮（不可编辑）

---

### 2. AI 字段解释区

| 字段     | 类型        | 说明                                               |
| -------- | ----------- | -------------------------------------------------- |
| 字段路径 | `<code>`    | 例如：`resp_data.articles[].title`                 |
| 字段类型 | `<span>`    | 例如：`string`、`number`、`boolean`                |
| 字段含义 | `<p>`       | 由 AI 推理的自然语言解释                           |
| 展示方式 | `<ul>` 列表 | 按字段路径分组显示，层级缩进结构，支持折叠嵌套字段 |

#### ✅ 功能交互：
- 语义解释结果支持折叠展开
- 长字段路径高亮关键部分
- 鼠标 hover 可显示字段原始值（可选）

---

### 3. JSON 结构总结区

| 字段         | 类型                                                         | 说明                                    |
| ------------ | ------------------------------------------------------------ | --------------------------------------- |
| 总结段落     | `<div>` 或 `<p>`                                             | AI 自动生成，描述整体 JSON 的语义和场景 |
| 示例内容     | `这是一个文章列表接口，返回了文章 ID、标题、更新时间和所属分组` |                                         |
| 图标（可选） | `<Icon>`                                                     | 搭配灯泡/文档图标增强可视感             |

#### ✅ 功能交互：
- 一段简洁文字总结
- 支持一键复制总结文本（按钮）

---

### 4. TypeScript 类型定义区

| 字段      | 类型          | 说明                                     |
| --------- | ------------- | ---------------------------------------- |
| TS 代码块 | `<pre><code>` | 显示 interface 类型定义，带高亮          |
| 复制按钮  | `<button>`    | 复制 interface 到剪贴板                  |
| 折叠区    | `<Accordion>` | 可隐藏/展开 TS 输出区域                  |
| 命名风格  | camelCase     | 所有字段保持原始风格输出（或做统一转换） |

#### ✅ 功能交互：
- 支持语法高亮（highlight.js / Prism.js）
- 多个 interface 顺序清晰排列，嵌套保持缩进

---

### 5. 接口中文文档区

| 字段     | 类型             | 说明                         |
| -------- | ---------------- | ---------------------------- |
| 字段名   | `<b>` / `<code>` | 如 `article_id`              |
| 类型     | `<span>`         | 如 `string`                  |
| 中文说明 | `<p>`            | 字段的含义说明               |
| 文档结构 | `<ul>` / `<dl>`  | 可嵌套，层级展示嵌套字段文档 |
| 复制按钮 | `<button>`       | 一键复制为 Markdown 文档块   |

#### ✅ 功能交互：
- 支持复制整段文档至语雀/Notion
- 默认全部展开，可手动折叠分组

---

## ⚙️ 技术功能点规范

| 功能点          | 实现方式                                         |
| --------------- | ------------------------------------------------ |
| JSON 校验       | 使用 `try/catch(JSON.parse)` 或 `jsonlint`       |
| JSON 格式化     | 使用 `JSON.stringify(obj, null, 2)`              |
| 结构解析调用 AI | 调用 OpenRouter 接口，传入 prompt + 用户 JSON    |
| 高亮展示        | 使用 `react-json-view` / `highlight.js`          |
| 模型建议        | 推荐 Claude Sonnet（效果最佳），兼容 DeepSeek v3 |
| 响应式适配      | Tailwind CSS + `@media` breakpoints              |

---

## 🧪 MVP 流程图（简化）

```plaintext
用户粘贴 JSON → 点击解析 →
  AI 返回：
    → 结构总结（自然语言）
    → 字段解释（每字段）
    → TS 类型定义
    → 接口文档说明
→ 用户浏览 / 复制 / 下载结果
```

## ❌ 非 MVP 范围（暂不支持）

- JSON Schema 生成功能
- 自定义字段备注编辑
- 多语言输出（英文版）
- 历史记录 / 用户账户
- 文件上传 & URL 请求解析

------

## 📌 UI / 交互建议（适配原型生成）

- 所有核心模块都使用卡片式模块包装，标题+主体内容清晰分离
- 所有展示区提供按钮操作区（复制、折叠、刷新）
- 所有字段结构层级建议以「路径 + 嵌套树」视觉展现，增强理解力
- 所有内容模块建议有 tab 切换或 section 切换结构，提升移动端体验